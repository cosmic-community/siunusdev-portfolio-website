---
// src/components/ProductCard.astro
import type { Product } from '../../types'

export interface Props {
  product: Product
}

const { product } = Astro.props

const productName = product.metadata?.product_name || product.title
const description = product.metadata?.description || ''
const category = product.metadata?.category
const screenshotUrl = product.metadata?.screenshot?.imgix_url
const productUrl = product.metadata?.product_url
const featured = product.metadata?.featured
---

<div class="card p-6 h-full flex flex-col">
  {featured && (
    <div class="mb-2">
      <span class="inline-block px-3 py-1 bg-primary text-white text-xs font-semibold rounded-full">
        Featured
      </span>
    </div>
  )}
  
  {screenshotUrl && (
    <div class="mb-4 overflow-hidden rounded-lg">
      <img 
        src={`${screenshotUrl}?w=800&h=480&fit=crop&auto=format,compress`}
        alt={productName}
        width="400"
        height="240"
        class="w-full h-48 object-cover transition-transform duration-300 hover:scale-105"
      />
    </div>
  )}
  
  {category && (
    <div class="mb-2">
      <span class="inline-block px-2 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-xs rounded">
        {category.value}
      </span>
    </div>
  )}
  
  <h3 class="text-xl font-semibold mb-3 text-gray-900 dark:text-white">
    {productName}
  </h3>
  
  <p class="text-gray-600 dark:text-gray-300 mb-4 flex-grow">
    {description}
  </p>
  
  {productUrl && productUrl !== '#' && (
    <a 
      href={productUrl} 
      target="_blank" 
      rel="noopener noreferrer"
      class="btn btn-secondary w-full text-center"
    >
      Lihat Produk
    </a>
  )}
</div>